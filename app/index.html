<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calendar analysis</title>
  <script type="text/javascript">
    (function(l) {
      console.log("Index.html check - current URL:", l.href);
      if (l.search[1] === '/' ) {
        var decoded = l.search.slice(1).split('&').map(function(s) { 
          return s.replace(/~and~/g, '&')
        }).join('?');
        
        var base = l.pathname.slice(0, l.pathname.lastIndexOf('/'));
        var newPath = base + decoded + l.hash;
        
        console.log("Index.html - detected redirect search:", l.search);
        console.log("Index.html - decoded path:", decoded);
        console.log("Index.html - calculated newPath:", newPath);

        if (newPath !== l.href) {
          window.history.replaceState(null, null, newPath);
          console.log("Index.html - history replaced to:", newPath);
        }
      } else {
        console.log("Index.html - no redirect detected in search");
      }
    }(window.location))
  </script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js" async defer></script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>

</html>
